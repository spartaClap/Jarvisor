<!DOCTYPE html>
<html>
  <head>
    <!-- html 기본 -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- 부트스트랩 연결 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <!-- ajax 연결 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>모두의 회의 비서 Jarvisor</title>


    <script>

      $(document).ready(function(){
          $('.main i').on('click',function(){
              $('input').toggleClass('active');
              if($('input').hasClass('active')){
                  $(this).attr('class',"fa fa-eye-slash fa-lg")
                  .prev('input').attr('type',"text");
              }else{
                  $(this).attr('class',"fa fa-eye fa-lg")
                  .prev('input').attr('type','password');
              }
          });
      });

      function Login() {
          $.ajax({
              type: "POST",
              url: "/login",
              data: {id_give: $('#id').val(), pw_give: $('#pw').val()},

              success: function (response) {
                  if (response['result'] == 'success') {
                      // 로그인이 정상적으로 되면, 토큰을 받아옵니다.
                      // 이 토큰을 mytoken이라는 키 값으로 쿠키에 저장합니다.
                      
                      $.cookie('mytoken', response['token']);

                      alert('로그인 완료!')
                      window.location.href = '/differ'
                  } else {
                      // 로그인이 안되면 에러메시지를 띄웁니다.
                      alert(response['msg'])
                  }
              }
          })
      }

      function Register() {
        window.location.href = '/register'
      }


    </script>



  </head>
  <body>
    <header>
      <nav class="navbar navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Jarvisor</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar"
            aria-controls="offcanvasDarkNavbar"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <!--메뉴버튼-->
          <div
            class="offcanvas offcanvas-end text-bg-dark"
            tabindex="-1"
            id="offcanvasDarkNavbar"
            aria-labelledby="offcanvasDarkNavbarLabel"
          >
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">
                Jarvisor
              </h5>
              <button
                type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="offcanvas"
                aria-label="Close"
              ></button>
            </div>
            <div class="offcanvas-body">
              <a onclick="">about</a>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div id="loginBox">
      <br><br><br>
      <p>ID : <input type="text" id="id"></p>
      <p>PW : <input type="password" id="pw"></p>
      <button id="btnLogin" onclick="Login()">login</button>
    </div>
    <div id="loginBox2">
      <button id="btnNewUser" onclick="Register()">회원가입</button>
      <button id="btnNewUser">아이디/비밀번호 찾기</button>

    </div>
  </body>
</html>